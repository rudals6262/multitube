(()=>{"use strict";let e,t,n=[],o=0,i=!1,d=!1;async function l(){i=!0,document.getElementById("overlayPlayButton").style.display="none",r(o)}function r(l){if(clearTimeout(t),l<0||l>=n.length)return void a();o=l;const c=n[o];console.log("Playing slide:",c),d=!1,document.getElementById("overlayPlayButton").style.display="none",s(),"video"===c.type?function(d){const{videoId:l,startTime:s,endTime:c}=d;document.querySelector(".video-container").style.display="block",document.getElementById("imageContainer").style.display="none",e.loadVideoById({videoId:l,startSeconds:s,endSeconds:c}),e.playVideo(),t=setTimeout((()=>{i&&o<n.length-1?r(o+1):a()}),1e3*(c-s))}(c):"image"===c.type&&function(e){const{imageUrl:d,duration:l}=e;document.querySelector(".video-container").style.display="none",document.getElementById("imageContainer").style.display="flex",document.getElementById("previewImage").src=d,t=setTimeout((()=>{i&&o<n.length-1?r(o+1):a()}),1e3*l)}(c)}function a(){i=!1,d=!0,e.pauseVideo(),document.getElementById("overlayPlayButton").style.display="flex",s()}function s(){const e=document.getElementById("prevSlideButton"),t=document.getElementById("nextSlideButton");e&&(e.disabled=0===o),t&&(t.disabled=o===n.length-1||d)}window.addEventListener("load",(async function(){await async function(){return new Promise((e=>{if(window.YT)e();else{const t=document.createElement("script");t.src="https://www.youtube.com/iframe_api";const n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n),window.onYouTubeIframeAPIReady=()=>{e()}}}))}();const t=new URLSearchParams(window.location.search),o=t.get("slideQueue");if(console.log("Received slideQueue param:",o),o)try{const e=JSON.parse(decodeURIComponent(o));console.log("Decoded slideQueue:",e),Array.isArray(e)&&e.length>0?(n=e,console.log("Loaded slideQueue:",n)):console.error("Decoded slideQueue is empty or not an array")}catch(e){console.error("Error parsing slideQueue:",e)}else console.error("No slideQueue parameter found in URL");document.querySelector(".preview-group-title").innerText=decodeURIComponent(t.get("groupTitle")||""),document.querySelector(".preview-description").innerText=decodeURIComponent(t.get("description")||""),await async function(){return new Promise((t=>{e=new YT.Player("player",{height:"100%",width:"100%",playerVars:{autoplay:0,controls:0},events:{onReady:t}})}))}(),s(),l()})),window.playSlides=function(){l()}})();